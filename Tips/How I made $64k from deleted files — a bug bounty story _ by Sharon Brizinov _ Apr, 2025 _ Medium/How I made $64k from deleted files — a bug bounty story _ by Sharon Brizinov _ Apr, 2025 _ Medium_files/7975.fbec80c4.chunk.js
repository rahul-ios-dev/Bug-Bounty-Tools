"use strict";(self.webpackChunklite=self.webpackChunklite||[]).push([[7975],{57975:(e,n,i)=>{i.d(n,{W:()=>G});var t=i(64467),a=i(96540),l=i(74346),d=i(26557),o=i(22213),r=i(69650),s=i(12600),u=i(72541),m=i(11828),k=i(80182),c=i(80074),p=i(27721),v=i(1722),S=i(19228),N=i(43634),F=i(34317),g=i(49287),b=i(56743),f=i(75599),y=i(39160),h=i(51771),C=i(46879),w=i(17745),O=i(32318),E=i(80045),_=i(65364),D=i(52705),V=i(14281),T=i(1037),P=i(22541),I={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PostVotersDialogQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pagingOptions"}},type:{kind:"NamedType",name:{kind:"Name",value:"PagingOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"post"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"title"}},{kind:"Field",name:{kind:"Name",value:"clapCount"}},{kind:"Field",name:{kind:"Name",value:"voterCount"}},{kind:"Field",name:{kind:"Name",value:"voters"},arguments:[{kind:"Argument",name:{kind:"Name",value:"paging"},value:{kind:"Variable",name:{kind:"Name",value:"pagingOptions"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AuthorFollowSubscribeButton_user"}},{kind:"FragmentSpread",name:{kind:"Name",value:"UserInListDialog_user"}}]}},{kind:"Field",name:{kind:"Name",value:"clapCount"}}]}},{kind:"Field",name:{kind:"Name",value:"pagingInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"next"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"page"}}]}}]}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"AuthorFollowSubscribeButton_post"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"SignInOptions_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"imageId"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"SignUpOptions_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"imageId"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"SusiModal_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"SignInOptions_user"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SignUpOptions_user"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"useNewsletterV3Subscription_newsletterV3"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NewsletterV3"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"Field",name:{kind:"Name",value:"user"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"useNewsletterV3Subscription_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"useNewsletterV3Subscription_newsletterV3"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"useAuthorFollowSubscribeButton_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"FragmentSpread",name:{kind:"Name",value:"useNewsletterV3Subscription_user"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"useAuthorFollowSubscribeButton_newsletterV3"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NewsletterV3"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"FragmentSpread",name:{kind:"Name",value:"useNewsletterV3Subscription_newsletterV3"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"userUrl_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"customDomainState"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"live"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"domain"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"hasSubdomain"}},{kind:"Field",name:{kind:"Name",value:"username"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"UserAvatar_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"imageId"}},{kind:"Field",name:{kind:"Name",value:"membership"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"tier"}}]}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"FragmentSpread",name:{kind:"Name",value:"userUrl_user"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"SusiModal_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"AuthorFollowSubscribeButton_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"imageId"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SusiModal_user"}},{kind:"FragmentSpread",name:{kind:"Name",value:"useAuthorFollowSubscribeButton_user"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"useAuthorFollowSubscribeButton_newsletterV3"}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"UserInListDialog_user"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"username"}},{kind:"Field",name:{kind:"Name",value:"bio"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"FragmentSpread",name:{kind:"Name",value:"userUrl_user"}},{kind:"FragmentSpread",name:{kind:"Name",value:"UserAvatar_user"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"AuthorFollowSubscribeButton_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"SusiModal_post"}}]}}]},j=["__typename"];function U(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function A(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?U(Object(i),!0).forEach((function(n){(0,t.A)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):U(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var x=10,L=function(e){var n=e.post,i=e.hide,t=e.isVisible,l=e.fetchMore,d=e.loading;if(!n)return null;var o=n.title,r=n.voters,s=n.clapCount,u=n.voterCount;return a.createElement(T.X,{isVisible:t,fetchMore:l,loading:d,hide:i,title:o,clapCount:null!=s?s:0,voterCount:null!=u?u:0,voters:r?r.items.map((function(e,i){var t=e.user,l=e.clapCount;return t&&a.createElement(g.Ne,{source:{name:"post_clappers",postId:n.id,index:i}},a.createElement(V.B,{user:t,key:t.id,followButton:a.createElement(D.N,{user:t,post:n,scale:"S",susiEntry:"follow_list",noPortal:!0,preventParentClick:!0}),badge:a.createElement(P._,{clapCount:l})}))})):null})};function B(e){var n=e.postId,i=e.isVisible,t=e.hide;return i?a.createElement(_.X,{ssr:!1,query:I,variables:{postId:n,pagingOptions:{limit:x}},notifyOnNetworkStatusChange:!0},(function(e){var n,l=e.data,d=(l=void 0===l?{}:l).post,o=e.loading,r=e.error,s=e.fetchMore;if(r||null==d||!d.voters)return null;var u=d.voters.pagingInfo&&d.voters.pagingInfo.next;if(u){u.__typename;var m=(0,E.A)(u,j);n=function(){return s({variables:{pagingOptions:A(A({},m),{},{limit:x})}})}}return a.createElement(L,{hide:t,fetchMore:n,post:d,isVisible:i,loading:o})})):null}var H=i(5600),M=i(85864);function R(e){var n=e.clapCount,i=e.hasLabel,t=void 0!==i&&i,l=e.showFullNumber,d=void 0!==l&&l,o=e.post,r=e.hasDialog,s=void 0!==r&&r,u=e.shouldShowResponsiveLabelText,m=void 0!==u&&u,k=e.shouldHideClapsText,c=void 0!==k&&k,p=e.countColor,v=e.countScale,S=e.isLoading,N=void 0!==S&&S,F=o.id;if(!(n>0||N))return null;var g=function(e){var i=e.showVoters;return a.createElement(O.q,{showVoters:i,hasLabel:t,showFullNumber:d,shouldShowResponsiveLabelText:m,shouldHideClapsText:c,clapCount:n,countColor:p,countScale:v,isLoading:N})};return s&&F&&!N?a.createElement(M.B,null,(function(e){var n=e.isVisible,i=e.show,t=e.hide;return a.createElement(a.Fragment,null,a.createElement(H.G,{tooltipText:"View Claps",targetDistance:15},a.createElement(g,{showVoters:i})),n&&a.createElement(B,{isVisible:!0,hide:t,postId:F}))})):a.createElement(g,null)}var q=i(11517);function X(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function Y(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?X(Object(i),!0).forEach((function(n){(0,t.A)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):X(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var z=function(e){var n,i=e.post,t=e.buttonStyle,O=e.hasDialog,E=e.shouldShowResponsiveLabelText,_=void 0!==E&&E,D=e.shouldHideClapsText,V=void 0!==D&&D,T=e.shouldHideClapsCount,P=void 0!==T&&T,I=e.susiEntry,j=e.verticalClapsText,U=void 0!==j&&j,A=e.buttonColor,x=e.countScale,L=e.testId,B=(0,q.N)({post:i}),H=B.clapCount,M=B.clapCountLoading,X=Y(Y({},i),{},{clapCount:H}),z=(0,w.f)(),G=(0,p.R)(),K=G.value,Q=G.loading,W=null!==(n=null==K?void 0:K.id)&&void 0!==n?n:"",$=(0,v.h)(i).viewerEdge,J=(0,y.d4)((function(e){return e.config.authDomain})),Z=(0,y.Dy)((function(e){return e.multiVote.clapsPerPost})),ee=(0,f.w)(),ne=(0,F.$L)(),ie=(0,g.jI)(),te=(0,h.F)(Z,X,$),ae=te.clapCount,le=te.viewerClapCount,de=te.viewerHasClappedSinceFetch,oe=(0,a.useCallback)((function(){if(le&&le>=k.et)return"Viewer exceeded authorized claps limit.";var e;e={postId:i.id,clapCount:ae+1,viewerClapCount:le+1,viewerHasClappedSinceFetch:!0},ee((0,b.K7)(e))}),[le,i.id,ae]),re=(0,a.useCallback)((function(e){z(X,W,e,$),ne.event("post.clientUpvote",{postId:i.id,postIds:[i.id],voteCount:e,source:ie})}),[i.id,W,$,ie]),se=(0,c.s)({onIncrementClaps:oe,onSubmitClapsAccumulated:re}),ue=se.clappedAt,me=se.onFloatEnd,ke=se.removeBurst,ce=se.clap,pe=se.isPopping,ve=se.isShowingViewerClapCount,Se=se.burstOffsets,Ne=se.onPopEnd;(0,a.useEffect)((function(){return function(){var e;e={postId:i.id},ee((0,b.dy)(e))}}),[]);var Fe,ge=i.collection,be=i.creator,fe=i.id,ye=i.isPublished,he=i.isLimitedState,Ce=(Fe=!(!be||be.id!==W),he?"This feature is temporarily disabled":ye?Fe?"You cannot applaud your own story":void 0:"You cannot applaud a draft"),we=(0,k.vP)(t,_),Oe=we.alwaysShowClapsLabel,Ee=we.hasClapsLabel,_e=we.buttonScale,De=!!(le&&le>0),Ve=!!(ae&&ae>0),Te=ge&&ge.slug?(0,C.jXU)(J,ge.slug,fe):(0,C.A4e)(J,fe);return a.createElement(o.R,{verticalClapsText:U},a.createElement(s.O,{buttonStyle:t,hasClaps:Ve||M},W||Ce?a.createElement(a.Fragment,null,ve&&a.createElement(S.Cq,null,a.createElement(r.u,{count:le,clappedAt:ue,onFloatEnd:me})),a.createElement(m.s,{isPopping:pe,onPopEnd:Ne},a.createElement(d.g,{buttonColor:A,disableReason:Ce,isFilled:De,isLoading:Q||M,onClickAndHold:ce,scale:_e,shouldHideClapsText:V,testId:L})),Se.map((function(e){return a.createElement(l.S,{key:e,offset:e,onBurstEnd:ke})}))):a.createElement(N.r,{operation:"register",post:i,user:i.creator||void 0,actionUrl:Te,susiEntry:I,testId:L},a.createElement(d.g,{scale:_e,buttonColor:A,shouldHideClapsText:V,testId:L}))),(Ve||M)&&!P&&(!ve||Oe)&&a.createElement(u.T,{buttonStyle:t},a.createElement(R,{post:i,clapCount:ae,showFullNumber:de,hasLabel:Ee,hasDialog:O,shouldShowResponsiveLabelText:_,shouldHideClapsText:V,countColor:A,countScale:x,isLoading:M})))},G=function(e){var n;return a.createElement(g.Ne,{source:{postId:null===(n=e.post)||void 0===n?void 0:n.id},extendSource:!0},a.createElement(z,e))}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/7975.fbec80c4.chunk.js.map